FROM ubuntu:25.10


#RUN add-apt-repository ppa:deadsnakes/ppa
RUN apt update
RUN apt install --yes python3 python3-dev python3-venv libaugeas-dev gcc

RUN python3 -m venv /opt/certbot/
RUN /opt/certbot/bin/pip install --upgrade pip

RUN /opt/certbot/bin/pip install certbot

RUN ln -s /opt/certbot/bin/certbot /usr/bin/certbot
WORKDIR /app


# if my website is not running
CMD certbot certonly --standalone

# if it was running (Docker build is not running the server)
# sudo certbot certonly --webroot

# docker build  -t certbotpy -f DockerfileCertbot . 
# docker run -it -p 80:80 -v ${PWD}:/app certbotpy 
# siggi2017.jak+ersteller@gmail.com 
# ersteller.net

# Certificate is saved at: /etc/letsencrypt/live/ersteller.net/fullchain.pem
# Key is saved at:         /etc/letsencrypt/live/ersteller.net/privkey.pem
# cp /etc/letsencrypt/live/ersteller.net/fullchain.pem /etc/letsencrypt/live/ersteller.net/privkey.pem .

